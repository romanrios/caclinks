<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js CaC</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>


    <header>
            <h1>Fullstack Node.js Codo a Codo 4.0</h1>
        <nav>
            <span><a href="index.html">Videos</a></span>
            <span class="navbar-current"><a href="pdf.html">Archivos PDF</a></span>
        </nav>
    </header>



    <section>
        <h2>Archivos PDF</h2>
        <ul id="pdfList"></ul>
    </section>

    <script>
        const pdfFolder = './assets/';
        const pdfListElement = document.getElementById('pdfList');

        function cleanUpFileName(fileName) {
            // Decodificar la URL y extraer el nombre del archivo
            const decodedFileName = decodeURIComponent(fileName);
            const parts = decodedFileName.split('/');  // Dividir por barras para manejar URLs con directorios

            // Obtener el Ãºltimo fragmento como nombre del archivo
            return parts[parts.length - 1];
        }

        function loadPDFList() {
            fetch(pdfFolder)
                .then(response => response.text())
                .then(data => {
                    const parser = new DOMParser();
                    const htmlDocument = parser.parseFromString(data, 'text/html');
                    const files = htmlDocument.querySelectorAll('a');

                    const pdfFiles = Array.from(files)
                        .filter(file => file.href.endsWith('.pdf'))
                        .map(file => file.href);

                    pdfFiles.forEach(pdf => {
                        const listItem = document.createElement('li');
                        const cleanedFileName = cleanUpFileName(pdf);
                        listItem.innerHTML = `<a href="${pdf}" target="_blank">${cleanedFileName}</a>`;
                        pdfListElement.appendChild(listItem);
                    });
                })
                .catch(error => console.error('Error al cargar la lista de archivos:', error));
        }

        loadPDFList();
    </script>
</body>

</html>